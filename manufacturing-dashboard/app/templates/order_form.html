{% extends "base.html" %}
{% block content %}
{% if order %}
<h2>Edit order #{{ order.Order_ID }}</h2>
{% else %}
<h2>Create new order</h2>
{% endif %}
<form method="post">
  <label>Part</label>
  <select name="Part_ID">
    <option value="">-- None --</option>
    {% for p in parts %}
      {% if order and order.Part_ID == p.Part_ID %}
        <option value="{{ p.Part_ID }}" selected>{{ p.Part_Name }} ({{ p.Part_Size }})</option>
      {% else %}
        <option value="{{ p.Part_ID }}">{{ p.Part_Name }} ({{ p.Part_Size }})</option>
      {% endif %}
    {% endfor %}
  </select>

  <label>Order_Quantity</label>
  <input type="number" name="Order_Quantity" min="1" value="{{ order.Order_Quantity if order else 1 }}">

  <label>Order_Price</label>
  <input type="number" step="0.01" name="Order_Price" value="{{ order.Order_Price if order else 0 }}">

  <label>Order_Status</label>
  <select name="Order_Status">
    {% set statuses = ['Pending','Processing','Shipped','Completed','Cancelled'] %}
    {% for s in statuses %}
      {% if order and order.Order_Status == s %}
        <option selected>{{ s }}</option>
      {% else %}
        <option>{{ s }}</option>
      {% endif %}
    {% endfor %}
  </select>

  <label>Order_Date</label>
  <input type="date" name="Order_Date" value="{{ order.Order_Date if order else '' }}">

  <button type="submit">{% if order %}Update{% else %}Create{% endif %}</button>
</form>
{% endblock %}
